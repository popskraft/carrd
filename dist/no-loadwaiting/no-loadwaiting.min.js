/* No-loadwaiting v0.1.0 (2026-01-12) */(function(){"use strict";const DEFAULTS={animationDuration:750,observerTimeout:5000,scrollPulseInterval:60,scrollPulseCount:10,rafPulseCount:4};const externalOptions=(typeof window!=='undefined'&&window.CarrdPluginOptions&&window.CarrdPluginOptions.noLoadwaiting)||{};const CONFIG={};for(const key in DEFAULTS){CONFIG[key]=Object.prototype.hasOwnProperty.call(externalOptions,key)?externalOptions[key]:DEFAULTS[key];}let initialized=false;let cachedBody=null;function getBody(){if(cachedBody&&cachedBody.isConnected)return cachedBody;cachedBody=document.body;return cachedBody;}function markReadyNow(){const body=getBody();if(!body)return;body.classList.remove("is-loading","with-loader");if(!body.classList.contains("is-ready")){body.classList.add("is-ready");body.classList.add("is-playing");setTimeout(function(){body.classList.remove("is-playing");},CONFIG.animationDuration);}}function hideLoaderIfPresent(){const loader=document.getElementById("loader");if(!loader)return false;loader.style.cssText="display:none !important; visibility:hidden !important; opacity:0 !important; pointer-events:none !important;";return true;}function kickScrollHandlers(){let pulses=0;const timer=setInterval(function(){if(++pulses>=CONFIG.scrollPulseCount){clearInterval(timer);return;}dispatchLayoutEvents();},CONFIG.scrollPulseInterval);let rafPulses=0;(function rafTick(){dispatchLayoutEvents();if(++rafPulses<CONFIG.rafPulseCount)requestAnimationFrame(rafTick);})();}function dispatchLayoutEvents(){try{window.dispatchEvent(new Event("resize"));window.dispatchEvent(new Event("scroll"));}catch(e){}}function setupObservers(){const body=getBody();if(!body)return;const classObserver=new MutationObserver(function(){if(body.classList.contains("with-loader")){body.classList.remove("with-loader");}});const childObserver=new MutationObserver(function(){if(hideLoaderIfPresent()){childObserver.disconnect();}});classObserver.observe(body,{attributes:true,attributeFilter:["class"],});childObserver.observe(body,{childList:true});setTimeout(function(){classObserver.disconnect();childObserver.disconnect();},CONFIG.observerTimeout);}function init(){if(initialized)return;initialized=true;try{markReadyNow();hideLoaderIfPresent();setupObservers();kickScrollHandlers();}catch(e){console.warn("early-animate-override failed:",e);}}if(document.readyState==="loading"){document.addEventListener("DOMContentLoaded",init,{once:true});}else{init();}})();