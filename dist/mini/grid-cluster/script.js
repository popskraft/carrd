/***Grid Cluster Script-Groups consecutive grid blocks into containers*Script:Finds consecutive grid elements,wraps them in custom-grid-container,*applies largest grid size to container,constrains wide images*Required classes:*-grid-2,grid-3,grid-4:Creates 2/3/4-column layouts*-grid-sm-2:Optional 2-column on small screens*/(function(){const GRID_CLASSES=['grid-2','grid-3','grid-4','grid-5','grid-6'];const GRID_SELECTOR=GRID_CLASSES.map(cls=>`.${cls}`).join(',');const isGridBlock=element=>element&&GRID_CLASSES.some(cls=>element.classList&&element.classList.contains(cls));const getGridSize=element=>{if(!element||!element.classList)return null;const sizeClass=GRID_CLASSES.find(cls=>element.classList.contains(cls));if(!sizeClass)return null;const numeric=parseInt(sizeClass.split('-')[1],10);return Number.isNaN(numeric)?null:numeric;};const collected=new Set();const gridBlocks=document.querySelectorAll(GRID_SELECTOR);gridBlocks.forEach(block=>{if(collected.has(block))return;const cluster=[block];const baseSize=getGridSize(block);let sibling=block.nextElementSibling;while(isGridBlock(sibling)){const siblingSize=getGridSize(sibling);if(baseSize!==null&&siblingSize!==baseSize){break;}cluster.push(sibling);collected.add(sibling);sibling=sibling.nextElementSibling;}collected.add(block);wrapCluster(cluster,baseSize);});function wrapCluster(cluster,gridSize){if(!cluster.length||!cluster[0].parentNode)return;const container=document.createElement('div');const classList=['custom-grid-container'];if(gridSize&&gridSize>=2){classList.push(`grid-${gridSize}`);}if(cluster.some(el=>el.classList.contains('grid-sm-2'))){classList.push('grid-sm-2');}container.className=classList.join(' ');cluster[0].parentNode.insertBefore(container,cluster[0]);cluster.forEach(node=>container.appendChild(node));}document.querySelectorAll('.custom-grid-container .image-component>.frame').forEach(frame=>{const computedWidth=window.getComputedStyle(frame).width;const widthInRem=parseFloat(computedWidth)/parseFloat(getComputedStyle(document.documentElement).fontSize);if(widthInRem>20){frame.classList.add('constrain-width');}});})();