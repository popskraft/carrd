/* Columns v0.1.11 (2026-02-17) */(function(){'use strict';const DEFAULTS={gridClasses:['grid-2','grid-3','grid-4','grid-5','grid-6'],cardSelector:'.cards',defaultCardBg:'var(--theme-card-bg-default)',grid:{enabled:true},cards:{enabled:true},widthClasses:{'w-20':'20%','w-25':'25%','w-30':'33%','w-40':'40%','w-50':'50%','w-60':'60%','w-70':'67%','w-75':'75%','w-80':'80%'}};const externalOptions=(typeof window!=='undefined'&&window.CarrdPluginOptions&&window.CarrdPluginOptions.columns)||{};const CONFIG={...DEFAULTS,...externalOptions,grid:{...DEFAULTS.grid,...(externalOptions.grid||{})},cards:{...DEFAULTS.cards,...(externalOptions.cards||{})}};const SELECTORS={gridContainer:'theme-columns-grid',desktopWidths:'theme-columns-grid--desktop-widths',constrainWidth:'theme-columns-constrain',cardItem:'theme-card-item',imageFrameInGrid:'.theme-columns-grid .image-component > .frame'};const GRID_CLASSES=CONFIG.gridClasses;const WIDTH_CLASS_MAP=CONFIG.widthClasses;const GRID_SELECTOR=GRID_CLASSES.map(cls=>`.${cls}`).join(',');const WIDTH_CLASSES=Object.keys(WIDTH_CLASS_MAP);const isGridBlock=element=>element&&GRID_CLASSES.some(cls=>element.classList&&element.classList.contains(cls));const getGridSize=element=>{if(!element||!element.classList)return null;const sizeClass=GRID_CLASSES.find(cls=>element.classList.contains(cls));if(!sizeClass)return null;const numeric=parseInt(sizeClass.split('-')[1],10);return Number.isNaN(numeric)?null:numeric;};const widthValueForElement=element=>{if(!element||!element.classList)return null;const widthClass=WIDTH_CLASSES.find(cls=>element.classList.contains(cls));return widthClass?WIDTH_CLASS_MAP[widthClass]:null;};function wrapCluster(cluster,gridSize){if(!cluster.length||!cluster[0].parentNode)return;if(cluster[0].classList.contains('justify')){cluster.forEach(node=>node.classList.add('justify'));}const container=document.createElement('div');const classList=[SELECTORS.gridContainer];if(gridSize&&gridSize>=2){classList.push(`grid-${gridSize}`);}if(cluster.some(el=>el.classList.contains('grid-sm-2'))){classList.push('grid-sm-2');}container.className=classList.join(' ');cluster[0].parentNode.insertBefore(container,cluster[0]);cluster.forEach(node=>container.appendChild(node));applyDesktopWidths(container,cluster,gridSize);}function applyDesktopWidths(container,cluster,gridSize){if(!gridSize||gridSize<2||cluster.length<gridSize)return;const initialRow=cluster.slice(0,gridSize);const columnWidths=initialRow.map(widthValueForElement);if(!columnWidths.some(Boolean))return;const templateParts=columnWidths.map(value=>value||'minmax(0, 1fr)');container.classList.add(SELECTORS.desktopWidths);container.style.setProperty('--theme-columns-desktop-template',templateParts.join(' '));}function constrainImageFrames(){document.querySelectorAll(SELECTORS.imageFrameInGrid).forEach(frame=>{const computedWidth=window.getComputedStyle(frame).width;const widthInRem=parseFloat(computedWidth)/parseFloat(getComputedStyle(document.documentElement).fontSize);if(widthInRem>20){frame.classList.add(SELECTORS.constrainWidth);}});}function initGridCluster(){const collected=new Set();const gridBlocks=document.querySelectorAll(GRID_SELECTOR);gridBlocks.forEach(block=>{if(collected.has(block))return;if(block.dataset.gridInitialized==='true')return;const cluster=[block];const baseSize=getGridSize(block);let sibling=block.nextElementSibling;while(isGridBlock(sibling)){const siblingSize=getGridSize(sibling);if(baseSize!==null&&siblingSize!==baseSize){break;}cluster.push(sibling);collected.add(sibling);sibling=sibling.nextElementSibling;}collected.add(block);cluster.forEach(node=>node.dataset.gridInitialized='true');wrapCluster(cluster,baseSize);});constrainImageFrames();}const parsePadding=(val)=>{if(!val)return null;return val.split(' ').map(v=>!isNaN(v)?v+'rem':v).join(' ');};const initCards=()=>{const cardContainers=document.querySelectorAll(CONFIG.cardSelector);cardContainers.forEach(container=>{if(container.dataset.cardsInitialized==='true')return;container.dataset.cardsInitialized='true';const style=window.getComputedStyle(container);const backgroundColor=style.backgroundColor;const borderRadius=style.borderRadius;const borderTopWidth=style.borderTopWidth;const borderTopStyle=style.borderTopStyle;const borderTopColor=style.borderTopColor;const boxShadow=style.boxShadow;const backgroundImage=style.backgroundImage;const backgroundPosition=style.backgroundPosition;const backgroundRepeat=style.backgroundRepeat;const backgroundSize=style.backgroundSize;const dataPadding=parsePadding(container.dataset.padding);const dataPaddingMobile=parsePadding(container.dataset.paddingMobile);const dataColor=container.dataset.color;container.style.setProperty('border','none','important');container.style.setProperty('box-shadow','none','important');if(!dataColor){container.style.setProperty('background-color','transparent','important');container.style.setProperty('background','none','important');}const inner=container.querySelector('.inner');if(!inner)return;const columns=Array.from(inner.children);columns.forEach((column,index)=>{if(column.querySelector('.theme-card-item, .card-item'))return;const cardItem=document.createElement('div');cardItem.classList.add(SELECTORS.cardItem);const specificColor=container.getAttribute(`data-color-${index + 1}`);const specificBorderColor=container.getAttribute(`data-border-color-${index + 1}`);if(specificColor){cardItem.style.backgroundColor=specificColor;}else if(dataColor){cardItem.style.backgroundColor=dataColor;}else if(backgroundColor&&backgroundColor!=='rgba(0, 0, 0, 0)'&&backgroundColor!=='transparent'){cardItem.style.backgroundColor=backgroundColor;}else{cardItem.style.backgroundColor=CONFIG.defaultCardBg;}if(borderRadius&&borderRadius!=='0px'){cardItem.style.setProperty('--theme-card-border-radius',borderRadius);}if(borderTopWidth&&borderTopWidth!=='0px'&&borderTopStyle!=='none'){cardItem.style.borderWidth=borderTopWidth;cardItem.style.borderStyle=borderTopStyle;cardItem.style.borderColor=specificBorderColor||borderTopColor;}if(boxShadow&&boxShadow!=='none'){cardItem.style.boxShadow=boxShadow;}if(!dataColor&&!specificColor&&backgroundImage&&backgroundImage!=='none'){cardItem.style.backgroundImage=backgroundImage;cardItem.style.backgroundPosition=backgroundPosition;cardItem.style.backgroundRepeat=backgroundRepeat;cardItem.style.backgroundSize=backgroundSize;}if(dataPadding){cardItem.style.setProperty('--theme-card-padding',dataPadding);}if(dataPaddingMobile){cardItem.style.setProperty('--theme-card-padding-mobile',dataPaddingMobile);}while(column.firstChild){cardItem.appendChild(column.firstChild);}column.appendChild(cardItem);});});};function init(){if(CONFIG.grid.enabled!==false){initGridCluster();}if(CONFIG.cards.enabled!==false){initCards();}}if(document.readyState==='loading'){document.addEventListener('DOMContentLoaded',init);}else{init();}})();